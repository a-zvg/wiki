Gradle
======

Gradle - скрипты автоматической сборки, работающие в JVM, приемущественно для Java и Android
    проектов.

Структура проекта
-----------------

 * `build.gradle` - скрипт конфигурации с задачами проекта;
 * `settings.gradle` - скрипт конфигурации подпроектов;
 * `gradlew` - скрипт обертки над gradle.

`gradlew` - обертка конкретной версии Gradle, загружающая объявленную версию Gradle для сохранения
    совместимости конфигурации проекта и системы сборки и/или быстрого развертывания
    Gradle-приложения.

`settings.gradle` нужен как минимум для предотвращения его поиска.

Использование
-------------

Note: при первом запуске gradle будет запущен gradle-демон, ускоряющий последующие сборки.
    Остановить его можно командой `gradle --stop`

__Создание проекта__:

    gradle init [ --type тип ]

Тип:

 * `basic`;
 * `java-application` - структура типового java-приложения;
 * ...

__Список доступных задач__:

    ./gradlew tasks

Запуск задач желательно осуществлять с помощью обертки:

    ./gradlew имя_задачи [ имя_задачи [ ... ] ]

Конфигурация
------------

Конфигурация проекта осуществляется в файле `build.gradle`, в котором описываются задачи проекта,
    подключаются плагины и объявляются зависимости.

Gradle предоставляет интерфейс создания задач проекта. Gradle поставляется с библиотекой задач,
    определяемых типами.

    task имя_задачи(type: тип_задачи [, group: "имя_группы", description: "описание" ]) {
        ...
    }

Плагины
-------

Gradle расширяется плагинами. Плагины добавляют задачи в проект. Добавление плагина осуществялется в
    самом начале файла:

    plugins {
        id 'имя_плагина' [ version 'номер_версии' ]
        ...
    }

Устраревний способ: `apply plugin: 'имя_плагина'`.

Java плагин
-----------

Встроенный плагин, подключается к Gradle под именем `java`.

Java плагин основан на соглашениях, в том числе о месте хранения файлов:

 * `src/main/java` - основной исходный код;
 * `src/test/java` - исходный код тестов;
 * `src/main/resources` - ресурсы, которые будут включены в JAR-файл;
 * `src/test/resources` - путь к ресурсам тестов;
 * `build` - путь результатов сборки;
 * `build/libs` - путь к JAR-файлам.

Задачи общие:

 * `clean` - удаляет `build` директорию;
 * `build` - компилирует, тестирует, создает JAR-файл и готовит установочный дистрибутив проекта;
 * `assemble` - как `build`, но без тестирования;
 * `check` - компилирует и тестирует код;

Java-плагин задачи:

 * `compileJava` - компилирует исходный код;
 * `jar` - компилирует и создает JAR-файл.

Дополнительные плагины могут расширять указанные задачи. Также можно расширять их самостоятельно,
    что полезно для задачи `jar` для добавления в манифест точки входа (класса с методом `main`),
    а также добавления зависимостей в jar-файл:

    jar {
        manifest {
            attributes 'Main-Class': mainClassName
        }
        from {
            configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } 
        }
    }

Application плагин
------------------

Встроенный плагин, подключается к Gradle под именем `application`.

Application плагин требует указания входной точки в приложение.

    mainClassName = 'имя_класса'

Задачи:

 * `run` - компилирует и запускает приложение.

Управление зависимостями
------------------------

Java-библиотеки хранятся в репозиториях. Репозитории подключаются:

    repositories {
        имя_репозитория()
        [ ... ]
    }

Репозитории:

 * `jcenter` - новый репозиторий для Gradle;
 * `mavenCentral` - Maven репозиторий.

Зависимые библиотеки подключаются:

    dependencies {
        тип_зависимости 'имя_зависимости'
        [ ... ]
    }

Типы зависимостей Java:

 * `implementation` (бывший `compile`);
 * `testImplementation` (бывший `testCompile`);
 * ...
